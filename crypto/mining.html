<html>
  <head>
    <title>Mining - Crypto - DarkHeart Productions</title>
    <meta name="keywords" content="mining, crypto, crytocurrency, money, free money, free bitcoin, free satoshi">
    <script src="userdata.json"></script>
  </head>
  <body>
    <header>
      <div id="openHIW">How it Works</div>
      <div id="openPayouts">Payouts</div>
      <div id="openFaucets">Faucets</div>
      <div id="openSettings">Settings</div>
    </header>
    <div class="page">
      <div id="error" style="display: none"></div>
      <div class="th"><span id="sessionHashes"></span> Hashes this session @ <span id="hashesPerSecond">0</span> H/s</div>
      <div><span id="totalHashes"></span> All Time Hashes</div>
      <input id="threads" value="4" placeholder="Please enter thread amount.">
      <input id="address" value="" placeholder="Please enter your coin address.">
      <input id="email" value="" placeholder="Email: Optional, but recommended incase we can't pay your address.">
      <select id="selectedCoin">
        <option value="btc" selected>Bitcoin</option>
        <option value="ltc">Litecoin</option>
        <option value="doge">Dogecoin</option>
        <option value="xmr">Monero</option>
        <option value="hora">Hora Token</option>
        <option value="trx">Tron</option>
      </select>
      <div id="startMiner">Start</div>
    </div>
    <footer>
      Hashes are paid out every day at 12PM (UTC-700). So don't stress if you don't see a withdrawal button.
    </footer>
  </body>
  <script src="https://webminepool.com/lib/base.js"></script>
  <script>
      let app = {added: 0};
      app.setupMiner = (un) => {
        function start() {
          app.miner = WMP.User('SK_GpHX443HphJ6o9G8gCGcZ', un,{
            threads: Number(document.getElementById('threads').value),
            autoThreads: false,
            throttle: 0.3,
            forceASMJS: false
          });
          app.miner.start();
        }
        if (app.miner) {
          location = location; // refresh
        } else {
          start();
        }
      }
      setInterval(function() {
        if (app.miner) {
        let totalHashes = Number(app.miner.getTotalHashes());
          if (!localStorage.getItem('feian')) {
            localStorage.setItem('feian', 0);
          } else {
            localStorage.setItem('feian', Number(localStorage.getItem('feian')) + (totalHashes - app.added));
            app.added = totalHashes;
          }
          document.getElementById('hashesPerSecond').innerText = app.miner.getHashesPerSecond();
          document.getElementById('totalHashes').innerText = localStorage.getItem('feian');
          document.getElementById('sessionHashes').innerText = totalHashes;
        }
      }, 250);
    if (localStorage.getItem('feian')) {
       document.getElementById('totalHashes').innerText = localStorage.getItem('feian');
    } else {
       document.getElementById('totalHashes').innerText = '0';
    } 
    if (localStorage.getItem('iniol')) {
       document.getElementById('email').value = localStorage.getItem('iniol');
    }
    if (localStorage.getItem('egad')) {
       document.getElementById('user').value = localStorage.getItem('egad');
    }
    document.getElementById('startMiner').onclick = () => {
      let user = document.getElementById('address');
      let coin = document.getElementById('selectedCoin');
      let email = document.getElementById('email');
      let addon = '';
      let err = document.getElementById('error');
      if (email.value) {
        addon = ' * ' + email.value;
      }
      if (coin.value && user.value) {
        app.setupMiner(user.value + ' * ' + coin.value + addon);
        err.style.display = 'none';
      } else {
        err.innerText = 'Please fill out both fields and make sure your address is valid, we do not check.';
        err.style.display = 'block';
      }
    }
    document.getElementById('threads').onchange = () => {
      if (app.miner) {
        app.miner.setNumThreads(Number(document.getElementById('threads').value))
      }
    }
    document.getElementById('email').onkeyup = () => {
      localStorage.setItem('iniol', document.getElementById('email').value);
    }
    document.getElementById('user').onkeyup = () => {
      localStorage.setItem('egad', document.getElementById('user').value);
    }
  </script>
</html>
