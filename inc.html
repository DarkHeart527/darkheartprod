<html>
  <head>
    <title>Live</title>
    <script src="//console.re/connector.js" data-channel="dhp2020" id="consolerescript"></script>
  </head>
  <body>
    <div id="answers">
    </div>
    <div onclick="function(){signIn()}">Sign In (Editors Only)</div>
  </body>
  <script src="sheetsSimplifier.js">
  </script>
  <script>
   
    function updateSigninStatus(isSignedIn) {
      let nfiae = prompt("To Continue to this Web Page, you must enter a password. It is only given to those permitted to enter.")
      Sheets.url = '1Q48tUOFGqE0ky9NMAkNJwjKvHGGv-R1uRnfPhLGrsGs';
      Sheets.read('D2', function() {
        if (nfiae == Sheets.result[0][0]) {
          // Leave it be
          let name = prompt('Please put your name, using an invalid name will result in a ban. For the reset of the Summer School Term. Thank you!');
          if (!name) {
            
          } else {
           console.re.info(`${name} has connected!`); 
          }
        } 
        else {
            document.body.innerHTML = '';
            console.re.info(`A user has entered the wrong passcode and was sent to about:blank. Input: ${nfiae}`);
          setTimeout( function() {
            alert("The password is incorrect, if you are not permitted to use this webpage, LEAVE NOW!")
            location = "about:blank";
          }, 1000);
        }
      });
      if (isSignedIn) {
        if (gapi.auth2.getAuthInstance().currentUser.Ab.w3.U3 == 'officialdarkheartproductions@gmail.com') {
          let te = document.createElement('textarea');
          document.body.appendChild(te);
          te.placeholder = 'Put Answers Here!';
          te.onchange = function() {
            Sheets.write('A2', te.value, function() {
              updateDisplay();
            });
          }
        } else {
          signOut();
        }
      } else {
        
      }
      function updateDisplay() {
        Sheets.read("A2", function() {
          document.getElementById('answers').innerText = Sheets.result[0][0];
        })
      }
      setInterval(updateDisplay, 1000);
    }
  </script>
</html>
