<html>
	<head>
	</head>
	<body>
		<canvas style="background-color: rgba(0, 0, 0, 0.25)">
		</canvas>
		<img src="Untitled.png" style="display: none;">
		<img src="Untitled2.jpg" style="display: none;">
		<button id="test">Put a Picture</button>
		<button id="test2">Gray Scale</button>
		<button id="test3">Remove Blue</button>
		<button id="test4">Remove Red</button>
		<button id="test5">Remove Green</button>
		<button id="test6">Remove Blue then Apply Grayscale</button>
		<button id="test7">Remove Red then Apply Grayscale</button>
		<button id="test8">Remove Green then Apply Grayscale</button>
	</body>
	<script>
	let app = {
		setCanvas: function(el) {
			if (typeof(el) == 'object') {
				this.canvas = el;
				this.ctx = this.canvas.getContext('2d');
			}
		},
		canvas: '',
		ctx: '',
		clear: function() {
			this.ctx.beginPath();
			this.clearRect(0, 0, this.canvas.width, this.canvas.height);
			this.ctx.fill();
			this.ctx.closePath();
		},
		filter: (scale) => {
			switch(scale) {
				case 'grayscale':
					for (let i = 0; i < app.canvas.width; i++) {
						for (let j = 0; j < app.canvas.height; j++) {
							let dat = app.ctx.getImageData(i, j, 1, 1).data;
							let fS = '';
							if (dat[0] > dat[1] && dat [0] > dat[2]) { // Red is the highest
								fS = dat[0];
							} else if (dat[1] > dat[0] && dat [1] > dat[2]) { // Green is the highest
								fS = dat[1];
							} else if (dat[2] > dat[0] && dat [2] > dat[1]) { // Blue is the highest
								fS = dat[2];
							} else { // White, black, or plain grey
								fS = dat[0];
							}
							app.ctx.beginPath();
							app.ctx.rect(i, j, 1, 1);
							app.ctx.fillStyle = `rgba(${fS}, ${fS}, ${fS}, ${dat[3]})`;
							app.ctx.fill();
							app.ctx.closePath();
						}
					}
				break;
				default:
				break;
			}
		},
		lightfilter: (scale, type, perSec) => {
			if (!perSec) {
				perSec = 100;
			}
			switch(scale) {
				case 'grayscale':
					let i = 0;
					function iw() {
						for (let j = 0; j < app.canvas.height; j++) {
							let dat = app.ctx.getImageData(i, j, 1, 1).data;
							let fS = '';
							if (dat[0] > dat[1] && dat [0] > dat[2]) { // Red is the highest
								fS = dat[0];
							} else if (dat[1] > dat[0] && dat [1] > dat[2]) { // Green is the highest
								fS = dat[1];
							} else if (dat[2] > dat[0] && dat [2] > dat[1]) { // Blue is the highest
								fS = dat[2];
							} else { // White, black, or plain grey
								fS = dat[0];
							}
							app.ctx.beginPath();
							app.ctx.rect(i, j, 1, 1);
							app.ctx.fillStyle = `rgba(${fS}, ${fS}, ${fS}, ${dat[3]})`;
							app.ctx.fill();
							app.ctx.closePath();
						}
						setTimeout(function(){
						i++;
						iw()}, 1000/perSec);
					}
					iw();
				break;
				case 'noblue':
					let k = 0;
					function kw() {
						for (let j = 0; j < app.canvas.height; j++) {
							let dat = app.ctx.getImageData(k, j, 1, 1).data;
							let fS = '';
							switch (type) {
								case 'grayscale':
									if (dat[0] >= dat[1]) {
										fS = dat[0];
									} else if (dat[1] > dat[0]) {
										fS = dat[1];
									}
								break;
							}
							app.ctx.beginPath();
							app.ctx.rect(k, j, 1, 1);
							if (type) {
								app.ctx.fillStyle = `rgba(${fS}, ${fS}, ${fS}, ${dat[3]})`;
							} else {
								app.ctx.fillStyle = `rgba(${dat[0]}, ${dat[1]}, 0, ${dat[3]})`;	
							}
							app.ctx.fill();
							app.ctx.closePath();
						}
						setTimeout(function(){
						k++;
						kw()}, 1000/perSec);
					}
					kw();
				break;
				case 'nogreen':
					let g = 0;
					function gw() {
						for (let j = 0; j < app.canvas.height; j++) {
							let dat = app.ctx.getImageData(g, j, 1, 1).data;
							let fS = '';
							switch (type) {
								case 'grayscale':
									if (dat[0] >= dat[2]) {
										fS = dat[0];
									} else if (dat[2] > dat[0]) {
										fS = dat[2];
									}
								break;
							}
							app.ctx.beginPath();
							app.ctx.rect(g, j, 1, 1);
							if (type) {
								app.ctx.fillStyle = `rgba(${fS}, ${fS}, ${fS}, ${dat[3]})`;
							} else {
								app.ctx.fillStyle = `rgba(${dat[0]}, 0, ${dat[2]}, ${dat[3]})`;	
							}
							app.ctx.fill();
							app.ctx.closePath();
						}
						setTimeout(function(){
						g++;
						gw()}, 1000/perSec);
					}
					gw();
				break;
				case 'nored':
					let r = 0;
					function rw() {
						for (let j = 0; j < app.canvas.height; j++) {
							let dat = app.ctx.getImageData(r, j, 1, 1).data;
							let fS = '';
							switch (type) {
								case 'grayscale':
									if (dat[1] >= dat[2]) {
										fS = dat[1];
									} else if (dat[2] > dat[1]) {
										fS = dat[2];
									}
								break;
							}
							app.ctx.beginPath();
							app.ctx.rect(r, j, 1, 1);
							if (type) {
								app.ctx.fillStyle = `rgba(${fS}, ${fS}, ${fS}, ${dat[3]})`;
							} else {
								app.ctx.fillStyle = `rgba(0, ${dat[1]}, ${dat[2]}, ${dat[3]})`;	
							}
							app.ctx.fill();
							app.ctx.closePath();
						}
						setTimeout(function(){
						r++;
						rw()}, 1000/perSec);
					}
					rw();
				break;
				default:
				
				break;
			}
		},
	}
	</script>
	<script>
	setTimeout(function() {
		app.setCanvas(document.getElementsByTagName('canvas')[0]);
		app.canvas.width = window.innerWidth;
		app.canvas.height = window.innerHeight;
		app.ctx.fillStyle = 'rgb(255, 155, 5)';
		app.ctx.fillRect(0, 0, 25, 25)
		app.ctx.fillStyle = 'rgb(125, 155, 5)';
		app.ctx.fillRect(40, 0, 25, 25)
		app.ctx.fillStyle = 'rgb(125, 155, 36)';
		app.ctx.fillRect(25, 25, 25, 25);
		app.ctx.fillStyle = 'rgb(125, 0, 155)';
		app.ctx.fillRect(45, 45, 25, 25);
		document.getElementById('test').onclick = () => {
			app.ctx.drawImage(document.getElementsByTagName('img')[0], 0, 0, window.innerWidth, window.innerHeight);
		}
		document.getElementById('test9').onclick = () => {
			app.ctx.drawImage(document.getElementsByTagName('img')[1], 0, 0, window.innerWidth, window.innerHeight);
		}
		document.getElementById('test2').onclick = () => {
			app.lightfilter('grayscale', 1000);
		}
		document.getElementById('test3').onclick = () => {
			app.lightfilter('noblue', 1000);
		}
		document.getElementById('test4').onclick = () => {
			app.lightfilter('nored', 1000);
		}
		document.getElementById('test5').onclick = () => {
			app.lightfilter('nogreen', 1000);
		}
		document.getElementById('test6').onclick = () => {
			app.lightfilter('noblue', 'grayscale', 1000);
		}
		document.getElementById('test7').onclick = () => {
			app.lightfilter('nored', 'grayscale', 1000);
		}
		document.getElementById('test8').onclick = () => {
			app.lightfilter('nogreen', 'grayscale', 1000);
		}
	}, 500);
	</script>
</html>
